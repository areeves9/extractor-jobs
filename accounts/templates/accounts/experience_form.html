{% extends "base.html" %}

{% load crispy_forms_tags %} 

{% block content %}
    <div class="h-100 mt-4 row justify-content-center align-items-center">
      <div class="col-md-8">
        <h5 class="text-left">Add Experience</h5>

        <form class="form" action="" enctype="multipart/form-data" method="post">
        {% csrf_token %}
        {{ form|crispy }}
          <button class="btn btn-block btn-primary" type="submit">Add</button>
          <a href="{{ request.META.HTTP_REFERER }}" class="btn-block btn btn-secondary" type="submit">Back</a>

        </form>
    </div>
  </div> 

{% endblock %}

{% block javascript %}
<script>
  // Show and hide ending month and year fields
  let toggled = false;
  // elements created fro django forms
  const checkBox = document.getElementById("id_is_present_employeer");
  const endMonth = document.getElementById("div_id_end_month");
  const endYear = document.getElementById("div_id_end_year");

  checkCheck();

  // determine the state of the checkbox and show or hide inputs
  function checkCheck() {
    if (checkBox.checked) {
      toggled = true;
      hide();
    } else {
      toggled = false;
      show();
    }
  }
  
  // toggle the input
  function show() {
    endMonth.setAttribute('style', 'display: block;');
    endYear.setAttribute('style', 'display: block;');
  }
  // hide the input
  function hide() {
    endMonth.setAttribute('style', 'display: none;');
    endYear.setAttribute('style', 'display: none;');
  } 

  // add event listener to checkbox
  checkBox.addEventListener('click', function() {
    checkCheck();
  });

</script>
{% endblock %}

{% block footer %}
{{ form.media }}
{% endblock %}